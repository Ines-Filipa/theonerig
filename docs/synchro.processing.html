---

title: Title

keywords: fastai
sidebar: home_sidebar

summary: "summary"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 12_synchro.processing.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    {% raw %}
        
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_thresholds" class="doc_header"><code>get_thresholds</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L16" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_thresholds</code>(<strong><code>data</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_first_high" class="doc_header"><code>get_first_high</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L23" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_first_high</code>(<strong><code>data</code></strong>, <strong><code>threshold</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="reverse_detection" class="doc_header"><code>reverse_detection</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L29" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>reverse_detection</code>(<strong><code>data</code></strong>, <strong><code>frame_timepoints</code></strong>, <strong><code>low_threshold</code></strong>, <strong><code>increment</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="extend_timepoints" class="doc_header"><code>extend_timepoints</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L47" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>extend_timepoints</code>(<strong><code>frame_timepoints</code></strong>, <strong><code>n</code></strong>=<em><code>10</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="detect_frames" class="doc_header"><code>detect_frames</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L53" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>detect_frames</code>(<strong><code>data</code></strong>, <strong><code>low_threshold</code></strong>, <strong><code>high_threshold</code></strong>, <strong><code>increment</code></strong>, <strong><code>do_reverse</code></strong>=<em><code>True</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="error_check" class="doc_header"><code>error_check</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L97" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>error_check</code>(<strong><code>frame_tp</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="cluster_frame_signals" class="doc_header"><code>cluster_frame_signals</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L107" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>cluster_frame_signals</code>(<strong><code>data</code></strong>, <strong><code>frame_timepoints</code></strong>, <strong><code>n_cluster</code></strong>=<em><code>5</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="cluster_by_epochs" class="doc_header"><code>cluster_by_epochs</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L135" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>cluster_by_epochs</code>(<strong><code>data</code></strong>, <strong><code>frame_timepoints</code></strong>, <strong><code>frame_signals</code></strong>, <strong><code>epochs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="parse_time" class="doc_header"><code>parse_time</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L165" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>parse_time</code>(<strong><code>time_str</code></strong>, <strong><code>pattern</code></strong>=<em><code>'%y%m%d_%H%M%S'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_position_estimate" class="doc_header"><code>get_position_estimate</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L168" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_position_estimate</code>(<strong><code>stim_time</code></strong>, <strong><code>record_time</code></strong>, <strong><code>sampling_rate</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="match_starting_position" class="doc_header"><code>match_starting_position</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L175" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>match_starting_position</code>(<strong><code>frame_timepoints</code></strong>, <strong><code>frame_signals</code></strong>, <strong><code>stim_signals</code></strong>, <strong><code>estimate_start</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="display_match" class="doc_header"><code>display_match</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L187" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>display_match</code>(<strong><code>match_position</code></strong>, <strong><code>reference</code></strong>=<em><code>None</code></em>, <strong><code>recorded</code></strong>=<em><code>None</code></em>, <strong><code>corrected</code></strong>=<em><code>None</code></em>, <strong><code>len_line</code></strong>=<em><code>50</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="frame_error_correction" class="doc_header"><code>frame_error_correction</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L199" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>frame_error_correction</code>(<strong><code>signals</code></strong>, <strong><code>unpacked</code></strong>, <strong><code>algo</code></strong>=<em><code>'nw'</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="error_frame_matches" class="doc_header"><code>error_frame_matches</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L220" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>error_frame_matches</code>(<strong><code>signals</code></strong>, <strong><code>marker</code></strong>, <strong><code>range_</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="apply_shifts" class="doc_header"><code>apply_shifts</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L239" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>apply_shifts</code>(<strong><code>unpacked</code></strong>, <strong><code>op_log</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="shift_detection_conv" class="doc_header"><code>shift_detection_conv</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L261" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>shift_detection_conv</code>(<strong><code>signals</code></strong>, <strong><code>marker</code></strong>, <strong><code>range_</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="shift_detection_NW" class="doc_header"><code>shift_detection_NW</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L290" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>shift_detection_NW</code>(<strong><code>signals</code></strong>, <strong><code>marker</code></strong>, <strong><code>simmat_basis</code></strong>=<em><code>[1, -1, -3, -3, -1]</code></em>, <strong><code>insdel</code></strong>=<em><code>-10</code></em>, <strong><code>rowside</code></strong>=<em><code>20</code></em>)</p>
</blockquote>
<p>Memory optimized Needleman-Wunsch algorithm.
Instead of an N<em>N matrix, it uses a N</em>(side*2+1) matrix. Indexing goes slightly differently but
result is the same, with far less memory consumption and exection speed scaling better with
size of the sequences to align.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="chop_stim_edges" class="doc_header"><code>chop_stim_edges</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L351" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>chop_stim_edges</code>(<strong><code>first_frame</code></strong>, <strong><code>last_frame</code></strong>, <strong><code>stim_tuple</code></strong>, <strong><code>shift_log</code></strong>, <strong><code>frame_replacement</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="detect_calcium_frames" class="doc_header"><code>detect_calcium_frames</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/synchro/processing.py#L366" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>detect_calcium_frames</code>(<strong><code>scanning_data</code></strong>, <strong><code>epoch_threshold</code></strong>=<em><code>-8</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}
</div>
 

